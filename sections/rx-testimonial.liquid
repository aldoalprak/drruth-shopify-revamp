{% include 'rx-testimonial-settings' %}

{{ 'rx-testimonial.css' | asset_url | stylesheet_tag }}
<script src="{{ 'rx-testimonial.js' | asset_url }}" defer="defer"></script>

<style>
  {{ section.settings.title_font | font_face }}
  {{ section.settings.font | font_face }}
  {{ section.settings.font | font_modify: 'weight', 'bolder' | font_face }}

  #shopify-section-{{ section.id }} .rx-wrapper {
    max-width: {{ section.settings.desktopMaxWidth }};
  }

  .rx-review-container {
    padding-top: 5px;
    padding-bottom: 50px;
    background-color: {{section.settings.container_bgcolor}};
  }

  .rx-testimonial-item-inner {
    background-color: {{section.settings.card_bgcolor}};

  }

  .rx-container-title {
    display: flex;
    justify-content: space-between;
  }

  @media (min-width: {{ minTabletSize }}px) and (max-width: {{ maxTabletSize }}px) {
    #shopify-section-{{ section.id }} .rx-wrapper {
      max-width: {{ section.settings.tabletMaxWidth }};
    }
  }

  @media (max-width: {{ maxMobileSize }}px) {
    #shopify-section-{{ section.id }} .rx-wrapper {
      max-width: {{ section.settings.mobileMaxWidth }};
    }
    .rx-container-title {
      display: block;
    }
  }

  #shopify-section-{{ section.id }} rx-slider .rx-slider-item {
    width: calc(100% / {{ section.settings.desktopColumns }});
    flex: 0 0 calc(100% / {{ section.settings.desktopColumns }});
  }
  
  @media (min-width: {{ minTabletSize }}px) and (max-width: {{ maxTabletSize }}px) {
    #shopify-section-{{ section.id }} rx-slider .rx-slider-item {
      width: calc(100% / {{ section.settings.tabletColumns }});
      flex: 0 0 calc(100% / {{ section.settings.tabletColumns }});
    }
  }
  
  @media (max-width: {{ maxMobileSize }}px) {
    #shopify-section-{{ section.id }} rx-slider .rx-slider-item {
      width: calc(100% / 1);
      flex: 0 0 calc(100% / 1);
    }
  }

  {%- if section.settings.empty_star_color != blank -%}
  #shopify-section-{{ section.id }} .rx-testimonial-rating .rx-testimonial-item-star-list--empty .rx-testimonial-item-star-icon svg {
    fill: {{ section.settings.empty_star_color }};
  }
  {% endif %}

  {%- if section.settings.filled_star_color != blank -%}
  #shopify-section-{{ section.id }} .rx-testimonial-rating .rx-testimonial-item-star-list--filled .rx-testimonial-item-star-icon svg {
    fill: {{ section.settings.filled_star_color }};
  }
  {% endif %}
</style>

<div class="rx-review-container">
  <rx-slider style="--us-font-family: {{ section.settings.font.family | escape }}, {{ section.settings.font.fallback_families | escape }};" class="rx-sections rx-wrapper rx-testimonial rx-testimonial-style1{% if section.settings.auto_hide_arrow %} rx-slider-auto-hide-arrow{% endif %}" data-max-mobile-size="{{maxMobileSize}}" data-min-tablet-size="{{minTabletSize}}" data-max-tablet-size="{{maxTabletSize}}" data-min-desktop-size="{{minDesktopSize}}" data-columns="{{section.settings.desktopColumns}}" data-medium-columns="{{section.settings.tabletColumns}}" data-small-columns="1"{% if section.settings.autoPlay %} data-auto-play="true"{% if section.settings.smoothAutoPlay %} data-smooth-auto-play="true"{% endif %}{% endif %}>
    <div class="rx-testimonial-list-container">
      <div class="rx-slider-list rx-testimonial-list">
        {%- for block in section.blocks -%}
          <div class="rx-slider-item rx-testimonial-item" {{ block.shopify_attributes }}>
            <div class="rx-testimonial-item-inner">
              <div class="rx-container-title">
                {%- if block.settings.title != blank -%}
                  <div class="rx-testimonial-item-title">{{ block.settings.title }}</div>
                {%- endif -%}
                <div class="rx-testimonial-rating">
                  <div class="rx-testimonial-item-star-list rx-testimonial-item-star-list--empty">
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  </div>
                  <div
                    class="rx-testimonial-item-star-list rx-testimonial-item-star-list--filled"
                    style="width: calc({{ block.settings.rating }} / 5 * 100%)"
                  >
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  
                    <div class="rx-testimonial-item-star-icon">
                      <svg viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M9.52447 0.463524C9.67415 0.00286901 10.3259 0.00287008 10.4755 0.463525L12.3574 6.25532C12.4243 6.46133 12.6163 6.60081 12.8329 6.60081H18.9228C19.4071 6.60081 19.6085 7.22062 19.2167 7.50532L14.2899 11.0848C14.1146 11.2122 14.0413 11.4379 14.1082 11.6439L15.9901 17.4357C16.1398 17.8963 15.6125 18.2794 15.2207 17.9947L10.2939 14.4152C10.1186 14.2878 9.88135 14.2878 9.70611 14.4152L4.77931 17.9947C4.38745 18.2794 3.86021 17.8963 4.00989 17.4357L5.89176 11.6439C5.9587 11.4379 5.88537 11.2122 5.71012 11.0848L0.783326 7.50532C0.39147 7.22062 0.592859 6.60081 1.07722 6.60081H7.16708C7.38369 6.60081 7.57567 6.46133 7.6426 6.25532L9.52447 0.463524Z"
                        ></path>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
              
              {%- if block.settings.testimonial != blank -%}
              <div class="rx-testimonial-item-testimonial">{{ block.settings.testimonial }}</div>
              {%- endif -%}
              
              {%- if block.settings.reviewer_name != blank -%}
              <div class="rx-testimonial-item-reviewer">
                <img src="https://cdn.shopify.com/s/files/1/0017/5443/1553/files/review-logo.png?v=1679751875">
                &nbsp;-<span>{{ block.settings.reviewer_name }}</span>
            
              </div>
              {%- endif -%}
            </div>
          </div>
        {%- endfor -%}
      </div>
    </div>
  </rx-slider>
</div>

{% schema %}
{
  "name": "RX-Testimonial",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "desktopColumns",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        }
      ],
      "default": "2",
      "label": "Columns on desktop"
    },
    {
      "type": "select",
      "id": "tabletColumns",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        }
      ],
      "label": "Columns on tablet",
      "default": "2"
    },
    {
      "type": "text",
      "id": "desktopMaxWidth",
      "default": "100%",
      "label": "Max width on desktop",
      "info": "For example: 80% or 1000px"
    },
    {
      "type": "text",
      "id": "tabletMaxWidth",
      "label": "Max width on tablet",
      "default": "100%",
      "info": "For example: 80% or 1000px"
    },
    {
      "type": "text",
      "id": "mobileMaxWidth",
      "label": "Max width on mobile",
      "default": "100%",
      "info": "For example: 80% or 1000px"
    },
    {
      "type": "checkbox",
      "id": "autoPlay",
      "default": false,
      "label": "Auto Play"
    },
    {
      "type": "checkbox",
      "id": "smoothAutoPlay",
      "default": false,
      "label": "Smooth Auto Play"
    },
    {
      "type": "checkbox",
      "id": "auto_hide_arrow",
      "default": false,
      "label": "Auto hide arrow"
    },
    {
      "type": "color",
      "id": "container_bgcolor",
      "default": "#fff",
      "label": "Container Background Color"
    },
    {
      "type": "color",
      "id": "card_bgcolor",
      "default": "#fff",
      "label": "Card Background Color"
    },
    {
      "type": "color",
      "id": "filled_star_color",
      "label": "Filled Star Color"
    },
    {
      "type": "color",
      "id": "empty_star_color",
      "label": "Empty Star Color"
    }
  ],
  "blocks": [
    {
      "type": "title",
      "name": "Testimonial",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Best Product"
        },
        {
          "type": "richtext",
          "id": "testimonial",
          "label": "Testimonial",
          "default": "<p>Review Text</p>"
        },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reviewer Name",
          "default": "Reviewer Name"
        },
        {
          "type": "select",
          "id": "rating",
          "options": [
            {
              "value": "1",
              "label": "1"
            },
            {
              "value": "2",
              "label": "2" 
            },
            {
              "value": "3",
              "label": "3" 
            },
            {
              "value": "4",
              "label": "4" 
            },
            {
              "value": "5",
              "label": "5" 
            }
          ],
          "default": "5",
          "label": "Rating"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "RX-Testimonial",
      "blocks": [
        {
          "type": "title"
        },
        {
          "type": "title"
        },
        {
          "type": "title"
        },
        {
          "type": "title"
        }
      ]
    }
  ]
}
{% endschema %}